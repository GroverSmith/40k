<!-- filename: battles/battle-details.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battle Report - 40k Crusade Campaign Tracker</title>
    <meta name="description" content="Detailed view of a battle report from the Crusade campaign.">

    <!-- CSS Files -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/buttons-unified.css">
    <link rel="stylesheet" href="../css/components-unified.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/user-dropdown.css">
    <link rel="stylesheet" href="../css/modal.css">
</head>
<body>
<div class="container">
    <a href="../index.html" class="back-button">← Back to Campaign Tracker</a>

    <!-- Loading State -->
    <div id="loading-state" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading battle report...</p>
    </div>

    <!-- Error State -->
    <div id="error-state" class="error-state" style="display: none;">
        <h3>⚠️ Battle Report Not Found</h3>
        <p id="error-message">Unable to load the requested battle report.</p>
        <div style="margin-top: 20px;">
            <a href="../index.html" class="btn btn-primary">Return to Campaign Tracker</a>
        </div>
    </div>

    <!-- Battle Content -->
    <div id="battle-content" style="display: none;">
        <div class="battle-header" style="background: linear-gradient(135deg, #2c5aa0 0%, #1e4080 100%); padding: 30px 20px; border-radius: 10px; margin-bottom: 30px; text-align: center;">
            <h1 id="battle-title" style="color: white; margin: 0;">Loading...</h1>
            <p id="battle-date" style="color: #ccc; margin-top: 10px;">Loading date...</p>
            <p id="battle-size" style="color: #4ecdc4; margin-top: 5px; font-size: 1.1em; font-weight: 500;">Loading size...</p>
        </div>

        <!-- Battle Result -->
        <div class="data-section" style="text-align: center; padding: 20px; margin-bottom: 30px;">
            <h2 id="battle-result" style="color: #4ecdc4; margin: 0;">-</h2>
        </div>

        <!-- Battle Details Grid -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <!-- Force 1 Card -->
            <div class="data-section">
                <div class="section-header">
                    <h3 id="force1-header">Force 1</h3>
                </div>
                <div class="section-content">
                    <p><strong>Player:</strong> <span id="player1-name">-</span></p>
                    <p><strong>Force:</strong> <a id="force1-link" href="#">-</a></p>
                    <p><strong>Army:</strong> <span id="army1-name">-</span></p>
                    <p><strong>Score:</strong> <span id="player1-score" style="font-size: 1.5em; color: #4ecdc4;">-</span></p>
                </div>
            </div>

            <!-- Force 2 Card -->
            <div class="data-section">
                <div class="section-header">
                    <h3 id="force2-header">Force 2</h3>
                </div>
                <div class="section-content">
                    <p><strong>Player:</strong> <span id="player2-name">-</span></p>
                    <p><strong>Force:</strong> <a id="force2-link" href="#">-</a></p>
                    <p><strong>Army:</strong> <span id="army2-name">-</span></p>
                    <p><strong>Score:</strong> <span id="player2-score" style="font-size: 1.5em; color: #4ecdc4;">-</span></p>
                </div>
            </div>
        </div>

        <!-- Battle Summary -->
        <div class="data-section" id="summary-section" style="display: none;">
            <div class="section-header">
                <h3>Battle Summary</h3>
            </div>
            <div class="section-content">
                <p id="battle-summary" style="white-space: pre-wrap;">-</p>
            </div>
        </div>

        
        <!-- Force 1 Point of View -->
        <div class="data-section" id="force-1-pov-section" style="display: none;">
            <div class="section-header-with-action">
                <h3>Force 1 Point of View</h3>
                <a href="#" class="add-section-btn" id="add-pov-1-btn">+ Add POV Story</a>
            </div>
            <div class="section-content">
                <p id="force-1-pov" style="white-space: pre-wrap;">-</p>
            </div>
        </div>

        <!-- Force 2 Point of View -->
        <div class="data-section" id="force-2-pov-section" style="display: none;">
            <div class="section-header-with-action">
                <h3>Force 2 Point of View</h3>
                <a href="#" class="add-section-btn" id="add-pov-2-btn">+ Add POV Story</a>
            </div>
            <div class="section-content">
                <p id="force-2-pov" style="white-space: pre-wrap;">-</p>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript Files -->
<script src="../js/table-defs.js"></script>
<script src="../js/core/unified-cache-facade.js"></script>
<script src="../js/core/config.js"></script>
<script src="../js/core/utils.js"></script>
<script src="../js/core/ui-helpers.js"></script>

<!-- User modules -->
<script src="../js/users/user-storage.js"></script>
<script src="../js/users/user-api.js"></script>
<script src="../js/users/user-ui.js"></script>
<script src="../js/users/user-modal.js"></script>
<script src="../js/users/user-manager.js"></script>

<script src="battle-details.js"></script>
</body>
</html>